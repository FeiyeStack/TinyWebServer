\hypertarget{classWebSrv_1_1Fiber}{}\doxysection{Web\+Srv\+::Fiber Class Reference}
\label{classWebSrv_1_1Fiber}\index{WebSrv::Fiber@{WebSrv::Fiber}}


协程类，每根协程一个栈  




{\ttfamily \#include $<$fiber.\+h$>$}



Inheritance diagram for Web\+Srv\+::Fiber\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=195pt]{classWebSrv_1_1Fiber__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Web\+Srv\+::Fiber\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=195pt]{classWebSrv_1_1Fiber__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_aa6ac0c09436910065eaa9225067fa383}\label{classWebSrv_1_1Fiber_aa6ac0c09436910065eaa9225067fa383}} 
enum {\bfseries State} \{ \newline
{\bfseries INIT}
, {\bfseries READY}
, {\bfseries RUNNING}
, {\bfseries SUSPEND}
, \newline
{\bfseries DONE}
, {\bfseries EXCEPT}
 \}
\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a40d3687446162841bc8c4bf982478031}\label{classWebSrv_1_1Fiber_a40d3687446162841bc8c4bf982478031}} 
using {\bfseries ptr} = std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classWebSrv_1_1Fiber}{Fiber}} $>$
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classWebSrv_1_1Fiber_aae99f02a840c2aeafdfa0d55c8dd663e}{Fiber}} (std\+::function$<$ void()$>$ cb, size\+\_\+t stacksize=0, bool use\+\_\+caller=false)
\begin{DoxyCompactList}\small\item\em Construct a new \mbox{\hyperlink{classWebSrv_1_1Fiber}{Fiber}} object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classWebSrv_1_1Fiber_acaec18eade8c5c3fd5cdcce199d1c85e}{reset}} (std\+::function$<$ void()$>$ cb)
\begin{DoxyCompactList}\small\item\em 重置协程，将协程设为\+INIT,作用于已结束（\+DONE,EXCEPT）或未开始（\+INIT） \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_af103958e1fa4d1d9a1113c0526ffa68c}\label{classWebSrv_1_1Fiber_af103958e1fa4d1d9a1113c0526ffa68c}} 
void \mbox{\hyperlink{classWebSrv_1_1Fiber_af103958e1fa4d1d9a1113c0526ffa68c}{call}} ()
\begin{DoxyCompactList}\small\item\em 将当前线程切换到运行状态(由当前线程的主协程执行) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a43c9906e335aa32b09c9a0b4c5de989c}\label{classWebSrv_1_1Fiber_a43c9906e335aa32b09c9a0b4c5de989c}} 
void \mbox{\hyperlink{classWebSrv_1_1Fiber_a43c9906e335aa32b09c9a0b4c5de989c}{back}} ()
\begin{DoxyCompactList}\small\item\em 将当前线程切出到后台(由当前线程的主协程执行) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a71b99f27fa5ad717b5d062b3369b82c3}\label{classWebSrv_1_1Fiber_a71b99f27fa5ad717b5d062b3369b82c3}} 
void \mbox{\hyperlink{classWebSrv_1_1Fiber_a71b99f27fa5ad717b5d062b3369b82c3}{swap\+In}} ()
\begin{DoxyCompactList}\small\item\em 将当前协程切换到运行状态 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_aff156722877becb62c424296a89536bc}\label{classWebSrv_1_1Fiber_aff156722877becb62c424296a89536bc}} 
void \mbox{\hyperlink{classWebSrv_1_1Fiber_aff156722877becb62c424296a89536bc}{swap\+Out}} ()
\begin{DoxyCompactList}\small\item\em 将当前协程切出到后台 \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{classWebSrv_1_1Fiber_a0fbc8de4699eae316f60e59a5562100e}{get\+Id}} () const
\begin{DoxyCompactList}\small\item\em Get fiber Id. \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{classWebSrv_1_1Fiber_a566dbeea755ece1ed51cc46e53fa0cca}{get\+State}} () const
\begin{DoxyCompactList}\small\item\em Get fiber Status. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classWebSrv_1_1Fiber_a7c6e115c396dcc824c600a7141753f46}{set\+This}} (\mbox{\hyperlink{classWebSrv_1_1Fiber}{Fiber}} $\ast$fiber)
\begin{DoxyCompactList}\small\item\em Set the This current thread running fiber. \end{DoxyCompactList}\item 
static Fiber\+::ptr \mbox{\hyperlink{classWebSrv_1_1Fiber_ae697dd1cdc372465eb09fadcc9da3924}{get\+This}} ()
\begin{DoxyCompactList}\small\item\em 返回当前的协程 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_ab902c3a09ce2b76def2d5a2e973ccf16}\label{classWebSrv_1_1Fiber_ab902c3a09ce2b76def2d5a2e973ccf16}} 
static void \mbox{\hyperlink{classWebSrv_1_1Fiber_ab902c3a09ce2b76def2d5a2e973ccf16}{yield\+To\+Ready}} ()
\begin{DoxyCompactList}\small\item\em 将当前协程切换到后台,并设置为\+READY状态 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_aea298fb4c0a67110fa82b41221a5680d}\label{classWebSrv_1_1Fiber_aea298fb4c0a67110fa82b41221a5680d}} 
static void \mbox{\hyperlink{classWebSrv_1_1Fiber_aea298fb4c0a67110fa82b41221a5680d}{yield\+To\+Suspend}} ()
\begin{DoxyCompactList}\small\item\em 将当前协程切换到后台,并设置为\+SUSPEND状态 \end{DoxyCompactList}\item 
static uint64\+\_\+t \mbox{\hyperlink{classWebSrv_1_1Fiber_a7a7b161cd9dd658fb89c9b4f2a4342df}{total\+Fibers}} ()
\begin{DoxyCompactList}\small\item\em 当前协程的总数 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_af876fe292930d690c17893483ade4edd}\label{classWebSrv_1_1Fiber_af876fe292930d690c17893483ade4edd}} 
static void \mbox{\hyperlink{classWebSrv_1_1Fiber_af876fe292930d690c17893483ade4edd}{main\+Func}} ()
\begin{DoxyCompactList}\small\item\em 协程执行函数，执行完成后到线程主协程 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a233b3232a6169cf7fc64b8cc44973792}\label{classWebSrv_1_1Fiber_a233b3232a6169cf7fc64b8cc44973792}} 
static void \mbox{\hyperlink{classWebSrv_1_1Fiber_a233b3232a6169cf7fc64b8cc44973792}{caller\+Main\+Func}} ()
\begin{DoxyCompactList}\small\item\em 协程执行函数，执行完成后到线程调度器 \end{DoxyCompactList}\item 
static uint64\+\_\+t \mbox{\hyperlink{classWebSrv_1_1Fiber_a703c3217b058c279f3a18162b647e3e5}{get\+Fiber\+Id}} ()
\begin{DoxyCompactList}\small\item\em 获取当前协程id \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classWebSrv_1_1Fiber_afb88c77ea5daaefa6c8fa6bc5b9aa5c1}\label{classWebSrv_1_1Fiber_afb88c77ea5daaefa6c8fa6bc5b9aa5c1}} 
class {\bfseries Scheduler}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
协程类，每根协程一个栈 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classWebSrv_1_1Fiber_aae99f02a840c2aeafdfa0d55c8dd663e}\label{classWebSrv_1_1Fiber_aae99f02a840c2aeafdfa0d55c8dd663e}} 
\index{WebSrv::Fiber@{WebSrv::Fiber}!Fiber@{Fiber}}
\index{Fiber@{Fiber}!WebSrv::Fiber@{WebSrv::Fiber}}
\doxysubsubsection{\texorpdfstring{Fiber()}{Fiber()}}
{\footnotesize\ttfamily Web\+Srv\+::\+Fiber\+::\+Fiber (\begin{DoxyParamCaption}\item[{std\+::function$<$ void()$>$}]{cb,  }\item[{size\+\_\+t}]{stacksize = {\ttfamily 0},  }\item[{bool}]{use\+\_\+caller = {\ttfamily false} }\end{DoxyParamCaption})}



Construct a new \mbox{\hyperlink{classWebSrv_1_1Fiber}{Fiber}} object. 


\begin{DoxyParams}{Parameters}
{\em cb} & 协程执行函数 \\
\hline
{\em stacksize} & 协程栈大小 \\
\hline
{\em use\+\_\+caller} & 是否在\+Main\+Fiber上调度 \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a703c3217b058c279f3a18162b647e3e5}\label{classWebSrv_1_1Fiber_a703c3217b058c279f3a18162b647e3e5}} 
\index{WebSrv::Fiber@{WebSrv::Fiber}!getFiberId@{getFiberId}}
\index{getFiberId@{getFiberId}!WebSrv::Fiber@{WebSrv::Fiber}}
\doxysubsubsection{\texorpdfstring{getFiberId()}{getFiberId()}}
{\footnotesize\ttfamily uint64\+\_\+t Web\+Srv\+::\+Fiber\+::get\+Fiber\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



获取当前协程id 

\begin{DoxyReturn}{Returns}
uint64\+\_\+t 
\end{DoxyReturn}
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a0fbc8de4699eae316f60e59a5562100e}\label{classWebSrv_1_1Fiber_a0fbc8de4699eae316f60e59a5562100e}} 
\index{WebSrv::Fiber@{WebSrv::Fiber}!getId@{getId}}
\index{getId@{getId}!WebSrv::Fiber@{WebSrv::Fiber}}
\doxysubsubsection{\texorpdfstring{getId()}{getId()}}
{\footnotesize\ttfamily uint64\+\_\+t Web\+Srv\+::\+Fiber\+::get\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get fiber Id. 

\begin{DoxyReturn}{Returns}
uint64\+\_\+t 
\end{DoxyReturn}
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a566dbeea755ece1ed51cc46e53fa0cca}\label{classWebSrv_1_1Fiber_a566dbeea755ece1ed51cc46e53fa0cca}} 
\index{WebSrv::Fiber@{WebSrv::Fiber}!getState@{getState}}
\index{getState@{getState}!WebSrv::Fiber@{WebSrv::Fiber}}
\doxysubsubsection{\texorpdfstring{getState()}{getState()}}
{\footnotesize\ttfamily uint64\+\_\+t Web\+Srv\+::\+Fiber\+::get\+State (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get fiber Status. 

\begin{DoxyReturn}{Returns}
uint64\+\_\+t 
\end{DoxyReturn}
\mbox{\Hypertarget{classWebSrv_1_1Fiber_ae697dd1cdc372465eb09fadcc9da3924}\label{classWebSrv_1_1Fiber_ae697dd1cdc372465eb09fadcc9da3924}} 
\index{WebSrv::Fiber@{WebSrv::Fiber}!getThis@{getThis}}
\index{getThis@{getThis}!WebSrv::Fiber@{WebSrv::Fiber}}
\doxysubsubsection{\texorpdfstring{getThis()}{getThis()}}
{\footnotesize\ttfamily Fiber\+::ptr Web\+Srv\+::\+Fiber\+::get\+This (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



返回当前的协程 

\begin{DoxyReturn}{Returns}
Fiber\+::ptr 
\end{DoxyReturn}
\mbox{\Hypertarget{classWebSrv_1_1Fiber_acaec18eade8c5c3fd5cdcce199d1c85e}\label{classWebSrv_1_1Fiber_acaec18eade8c5c3fd5cdcce199d1c85e}} 
\index{WebSrv::Fiber@{WebSrv::Fiber}!reset@{reset}}
\index{reset@{reset}!WebSrv::Fiber@{WebSrv::Fiber}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void Web\+Srv\+::\+Fiber\+::reset (\begin{DoxyParamCaption}\item[{std\+::function$<$ void()$>$}]{cb }\end{DoxyParamCaption})}



重置协程，将协程设为\+INIT,作用于已结束（\+DONE,EXCEPT）或未开始（\+INIT） 


\begin{DoxyParams}{Parameters}
{\em cb} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a7c6e115c396dcc824c600a7141753f46}\label{classWebSrv_1_1Fiber_a7c6e115c396dcc824c600a7141753f46}} 
\index{WebSrv::Fiber@{WebSrv::Fiber}!setThis@{setThis}}
\index{setThis@{setThis}!WebSrv::Fiber@{WebSrv::Fiber}}
\doxysubsubsection{\texorpdfstring{setThis()}{setThis()}}
{\footnotesize\ttfamily void Web\+Srv\+::\+Fiber\+::set\+This (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classWebSrv_1_1Fiber}{Fiber}} $\ast$}]{fiber }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Set the This current thread running fiber. 


\begin{DoxyParams}{Parameters}
{\em f} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classWebSrv_1_1Fiber_a7a7b161cd9dd658fb89c9b4f2a4342df}\label{classWebSrv_1_1Fiber_a7a7b161cd9dd658fb89c9b4f2a4342df}} 
\index{WebSrv::Fiber@{WebSrv::Fiber}!totalFibers@{totalFibers}}
\index{totalFibers@{totalFibers}!WebSrv::Fiber@{WebSrv::Fiber}}
\doxysubsubsection{\texorpdfstring{totalFibers()}{totalFibers()}}
{\footnotesize\ttfamily uint64\+\_\+t Web\+Srv\+::\+Fiber\+::total\+Fibers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



当前协程的总数 

\begin{DoxyReturn}{Returns}
uint64\+\_\+t 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\+Tiny\+Web\+Server/fiber.\+h\item 
src/fiber.\+cpp\end{DoxyCompactItemize}
